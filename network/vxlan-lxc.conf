# VXLAN Configuration for LXC Container Network
# This configuration manages VXLAN networks and LXC container IP assignments

# Host Configuration
HOST_IP=127.0.0.1
HOST_SSH_USER=mustafa
HOST_SSH_KEY=/home/mustafa/.ssh/id_rsa
HOST_SSH_PORT=22

# VXLAN Global Settings
VXLAN_MTU=1450
VXLAN_PORT=4789
VXLAN_BRIDGE_PREFIX=br-vx

# Subnet Definitions
# Format: SUBNET_NAME:VXLAN_ID:CIDR:GATEWAY:MULTICAST_GROUP:DESCRIPTION
SUBNETS=(
    "management:100:10.100.0.0/24:10.100.0.1:239.1.1.100:Management network for orchestrix"
    "development:101:10.101.0.0/24:10.101.0.1:239.1.1.101:Development containers"
    "production:102:10.102.0.0/24:10.102.0.1:239.1.1.102:Production services"
    "database:103:10.103.0.0/24:10.103.0.1:239.1.1.103:Database cluster network"
    "monitoring:104:10.104.0.0/24:10.104.0.1:239.1.1.104:Monitoring and logging"
)

# Default subnet for new containers
DEFAULT_SUBNET=development

# LXC Container IP Assignments
# Format: CONTAINER_NAME:SUBNET_NAME:IP_ADDRESS:MAC_ADDRESS(optional)
CONTAINER_IPS=(
    # Management subnet
    "orchestrix-master:management:10.100.0.10:"
    "orchestrix-agent:management:10.100.0.11:"
    
    # Development subnet
    "dev-env-instance-01:development:10.101.0.10:"
    "dev-env-instance-02:development:10.101.0.11:"
    "jenkins-agent:development:10.101.0.20:"
    
    # Production subnet
    "nginx-prod:production:10.102.0.10:"
    "app-server-01:production:10.102.0.20:"
    "app-server-02:production:10.102.0.21:"
    
    # Database subnet
    "mysql-master:database:10.103.0.10:"
    "mysql-slave-01:database:10.103.0.11:"
    "redis-cache:database:10.103.0.20:"
    "mongodb:database:10.103.0.30:"
    
    # Monitoring subnet
    "prometheus:monitoring:10.104.0.10:"
    "grafana:monitoring:10.104.0.11:"
    "elastic:monitoring:10.104.0.20:"
)

# Dynamic IP Pool Ranges (for containers without static IPs)
# Format: SUBNET_NAME:START_IP:END_IP
DHCP_POOLS=(
    "development:10.101.0.100:10.101.0.200"
    "production:10.102.0.100:10.102.0.200"
    "database:10.103.0.100:10.103.0.150"
    "monitoring:10.104.0.100:10.104.0.150"
)

# Inter-subnet routing rules
# Format: SOURCE_SUBNET:DEST_SUBNET:ALLOW/DENY
ROUTING_RULES=(
    "development:database:ALLOW"
    "development:monitoring:ALLOW"
    "production:database:ALLOW"
    "production:monitoring:ALLOW"
    "database:monitoring:ALLOW"
    "management:*:ALLOW"
)

# NAT Configuration for external access
ENABLE_NAT=true
NAT_INTERFACE=eth0
NAT_SUBNETS=(
    "development"
    "production"
)

# DNS Configuration
DNS_ENABLED=true
DNS_DOMAIN=orchestrix.local
DNS_SERVERS=(
    "8.8.8.8"
    "8.8.4.4"
)

# Container Network Interface Settings
CONTAINER_VETH_PREFIX=veth
CONTAINER_MTU=1450

# Bridge Configuration Options
BRIDGE_STP=on
BRIDGE_FD=15
BRIDGE_MAXAGE=20

# VXLAN Tunnel Options
VXLAN_TTL=10
VXLAN_TOS=inherit
VXLAN_LEARNING=on
VXLAN_PROXY=off
VXLAN_RSC=off
VXLAN_L2MISS=off
VXLAN_L3MISS=off

# Performance Tuning
TX_QUEUE_LEN=5000
RX_QUEUE_LEN=5000
UDP_CSUM_OFFLOAD=on

# Monitoring and Health Check
MONITOR_ENABLED=true
MONITOR_INTERVAL=30
HEALTH_CHECK_TIMEOUT=5

# Backup Configuration
BACKUP_NETWORK_CONFIG=true
BACKUP_PATH=/var/lib/orchestrix/network-backups
BACKUP_RETENTION_DAYS=30

# Logging
LOG_LEVEL=INFO
LOG_PATH=/var/log/orchestrix/vxlan-lxc.log
LOG_ROTATE_SIZE=100M
LOG_ROTATE_COUNT=10