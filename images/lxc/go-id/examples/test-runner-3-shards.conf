# Go-ID Multi-Shard Deployment Configuration
# Deploy Go-ID to 3 servers for a 3-shard distributed ID generation system

# ========================================
# Execution Mode
# ========================================
# PARALLEL - Deploy to all 3 servers simultaneously (faster)
# SEQUENTIAL - Deploy one by one (safer for testing)
EXECUTION_MODE=PARALLEL

# ========================================
# Multi-Target Deployment (3 Shards)
# ========================================

# Shard 0 - Primary
TARGET_1_NAME=shard-0
TARGET_1_SERVER_IP=192.168.1.100
TARGET_1_SERVER_PORT=22
TARGET_1_SSH_USER=root
TARGET_1_SSH_PASSWORD=your_password
# TARGET_1_SSH_KEY_PATH=/home/user/.ssh/id_rsa
TARGET_1_CONTAINER_NAME=go-id-shard-0
TARGET_1_CONTAINER_IP=10.200.100.50
TARGET_1_PORT_MAPPING=7010:7010

# Shard 1 - Secondary
TARGET_2_NAME=shard-1
TARGET_2_SERVER_IP=192.168.1.101
TARGET_2_SERVER_PORT=22
TARGET_2_SSH_USER=root
TARGET_2_SSH_PASSWORD=your_password
TARGET_2_CONTAINER_NAME=go-id-shard-1
TARGET_2_CONTAINER_IP=10.200.100.51
TARGET_2_PORT_MAPPING=7010:7010

# Shard 3 - Tertiary
TARGET_3_NAME=shard-2
TARGET_3_SERVER_IP=192.168.1.102
TARGET_3_SERVER_PORT=22
TARGET_3_SSH_USER=root
TARGET_3_SSH_PASSWORD=your_password
TARGET_3_CONTAINER_NAME=go-id-shard-2
TARGET_3_CONTAINER_IP=10.200.100.52
TARGET_3_PORT_MAPPING=7010:7010

# ========================================
# Artifact Information (auto-filled by build)
# ========================================
ARTIFACT_NAME=go-id-v1-1759680570.tar.gz
ARTIFACT_PATH=/home/mustafa/telcobright-projects/orchestrix/images/lxc/go-id/go-id-v.1/generated/artifact/go-id-v1-1759680570.tar.gz
ARTIFACT_VERSION=v1

# ========================================
# Container Configuration (Global)
# ========================================
IMAGE_NAME=go-id-base
NETWORK_BRIDGE=lxdbr0
SERVICE_PORT=7010
STORAGE_QUOTA=500M

# ========================================
# Test Configuration
# ========================================
RUN_HEALTH_CHECK=true
CLEANUP_ON_FAILURE=false
CLEANUP_ON_SUCCESS=false

# ========================================
# Important Notes:
# ========================================
# 1. Each shard MUST have a unique SHARD_ID set in container environment
#    - Configure this in the container launch script after deployment
#    - Example: lxc config set go-id-shard-0 environment.SHARD_ID 0
#              lxc config set go-id-shard-1 environment.SHARD_ID 1
#              lxc config set go-id-shard-2 environment.SHARD_ID 2
#
# 2. All shards must have TOTAL_SHARDS set to the same value (3 in this case)
#    - Example: lxc config set go-id-shard-0 environment.TOTAL_SHARDS 3
#
# 3. For Consul service discovery, configure CONSUL_URL on each container
#    - The service will auto-register with shard metadata
#
# 4. Use a load balancer (HAProxy/Nginx) or Consul for distributing requests
#    across the 3 shards
