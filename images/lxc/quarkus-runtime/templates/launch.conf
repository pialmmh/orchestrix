# ============================================
# Quarkus Runtime Container Launch Configuration
# ============================================
# This file configures runtime parameters for launching a Quarkus container instance

# ============================================
# INSTANCE IDENTITY
# ============================================
# Unique name for this instance (e.g., "routesphere-prod-1", "scheduler-dev-1")
INSTANCE_NAME="my-app-instance-1"

# Container image to use (from build artifact)
# Format: app-name-v1-TIMESTAMP.tar.gz
# Example: infinite-scheduler-v1-1730400000.tar.gz
CONTAINER_IMAGE="my-quarkus-app-v1-TIMESTAMP.tar.gz"

# ============================================
# NETWORK CONFIGURATION
# ============================================
# Port mapping: HOST_PORT:CONTAINER_PORT
# Application port
HOST_PORT_APP="8080"
CONTAINER_PORT_APP="8080"

# Promtail metrics port
HOST_PORT_PROMTAIL="9080"
CONTAINER_PORT_PROMTAIL="9080"

# Static IP (optional - leave empty for DHCP)
# Example: "10.10.199.50"
STATIC_IP=""

# ============================================
# LOGGING CONFIGURATION
# ============================================
# Loki endpoint (REQUIRED for log shipping)
LOKI_HOST="10.10.199.200"  # IP of grafana-loki-v1
LOKI_PORT="3100"

# Application log level
LOG_LEVEL="INFO"  # DEBUG, INFO, WARN, ERROR

# ============================================
# RESOURCE LIMITS
# ============================================
# Override build defaults if needed
MEMORY_LIMIT="2GB"
CPU_LIMIT="2"

# ============================================
# STORAGE CONFIGURATION
# ============================================
# Storage quota (if enabled)
STORAGE_QUOTA="10G"

# ============================================
# BIND MOUNTS (Optional)
# ============================================
# Mount host directories into container
# Format: "host_path:container_path,host_path2:container_path2"
# Example: "/data/app-config:/opt/app/config,/data/app-data:/opt/app/data"
MOUNT_BINDS=""

# ============================================
# ENVIRONMENT VARIABLES (Optional)
# ============================================
# Application-specific environment variables
# Format: "KEY1=value1,KEY2=value2"
# Example: "DB_HOST=10.10.199.171,DB_PORT=3306,DB_NAME=scheduler"
ENV_VARS=""

# ============================================
# CONSUL CONFIGURATION (Optional)
# ============================================
CONSUL_ENABLED="false"
CONSUL_HOST="localhost"
CONSUL_PORT="8500"

# ============================================
# MYSQL CONFIGURATION (Optional)
# ============================================
# For apps that need database (like infinite-scheduler)
MYSQL_ENABLED="false"
MYSQL_HOST="10.10.199.171"
MYSQL_PORT="3306"
MYSQL_DATABASE="scheduler"
MYSQL_USER="root"
MYSQL_PASSWORD="123456"

# ============================================
# APPLICATION-SPECIFIC CONFIGURATION
# ============================================
# Add any app-specific configuration here
# These will be passed as environment variables

# Example for infinite-scheduler:
# SCHEDULER_FETCH_INTERVAL="25"
# SCHEDULER_LOOKAHEAD_WINDOW="30"

# Example for routesphere:
# SMS_PROCESSING_THREADS="10"
# SMS_BATCH_SIZE="100"

# ============================================
# NOTES
# ============================================
# 1. Replace TIMESTAMP in CONTAINER_IMAGE with actual build timestamp
# 2. Ensure LOKI_HOST points to your grafana-loki container
# 3. Set HOST_PORT_APP to a unique port if running multiple instances
# 4. All logs automatically ship to Loki via Promtail
# 5. Access container: lxc exec <INSTANCE_NAME> -- bash
