# Kafka + Zookeeper Cluster Configuration
# Master configuration for 3-node cluster deployment

# ============================================
# CLUSTER TOPOLOGY
# ============================================
# This config deploys:
# - 3 Zookeeper nodes (ensemble)
# - 3 Kafka brokers (cluster)
# - All on separate servers with HOST NETWORKING (port forwarding)

# ============================================
# SERVER DEFINITIONS
# ============================================
# Format: SERVER_n=host:sshPort:sshUser:sshPassword

SERVER_1=123.200.0.50:8210:tbsms:TB@l38800
SERVER_2=123.200.0.117:8210:tbsms:TB@l38800
SERVER_3=123.200.0.51:8210:tbsms:TB@l38800

# Host IPs for container communication
SERVER_1_HOST_IP=123.200.0.50
SERVER_2_HOST_IP=123.200.0.117
SERVER_3_HOST_IP=123.200.0.51

# ============================================
# NETWORK CONFIGURATION
# ============================================
# Containers use host networking with port forwarding

NETWORK_MODE=host
DNS_SERVERS=8.8.8.8,8.8.4.4

# ============================================
# ZOOKEEPER ENSEMBLE CONFIGURATION
# ============================================
# 3-node ensemble for quorum

# Zookeeper Node 1 (on server 1, using host networking)
ZK1_SERVER=SERVER_1
ZK1_CONTAINER_NAME=zookeeper-node-1
ZK1_HOST_IP=123.200.0.50
ZK1_SERVER_ID=1
ZK1_CLIENT_PORT=2181
ZK1_PEER_PORT=2888
ZK1_LEADER_PORT=3888
ZK1_DATA_DIR=/data/zookeeper
ZK1_HEAP_OPTS=-Xms512M -Xmx512M

# Zookeeper Node 2 (on server 2, using host networking)
ZK2_SERVER=SERVER_2
ZK2_CONTAINER_NAME=zookeeper-node-2
ZK2_HOST_IP=123.200.0.117
ZK2_SERVER_ID=2
ZK2_CLIENT_PORT=2181
ZK2_PEER_PORT=2888
ZK2_LEADER_PORT=3888
ZK2_DATA_DIR=/data/zookeeper
ZK2_HEAP_OPTS=-Xms512M -Xmx512M

# Zookeeper Node 3 (on server 3, using host networking)
ZK3_SERVER=SERVER_3
ZK3_CONTAINER_NAME=zookeeper-node-3
ZK3_HOST_IP=123.200.0.51
ZK3_SERVER_ID=3
ZK3_CLIENT_PORT=2181
ZK3_PEER_PORT=2888
ZK3_LEADER_PORT=3888
ZK3_DATA_DIR=/data/zookeeper
ZK3_HEAP_OPTS=-Xms512M -Xmx512M

# Zookeeper Ensemble Configuration (using host IPs)
ZK_SERVERS=server.1=123.200.0.50:2888:3888;server.2=123.200.0.117:2888:3888;server.3=123.200.0.51:2888:3888

# ============================================
# KAFKA CLUSTER CONFIGURATION
# ============================================
# 3 brokers connected to Zookeeper ensemble

# Kafka Broker 1 (on server 1, using host networking)
KAFKA1_SERVER=SERVER_1
KAFKA1_CONTAINER_NAME=kafka-broker-1
KAFKA1_HOST_IP=123.200.0.50
KAFKA1_PORT=9092
KAFKA1_BROKER_ID=1
KAFKA1_ZOOKEEPER_CONNECT=123.200.0.50:2181,123.200.0.117:2181,123.200.0.51:2181/kafka
KAFKA1_LISTENERS=PLAINTEXT://0.0.0.0:9092
KAFKA1_ADVERTISED_LISTENERS=PLAINTEXT://123.200.0.50:9092
KAFKA1_LOG_DIRS=/data/kafka-logs
KAFKA1_HEAP_OPTS=-Xms1G -Xmx1G
KAFKA1_BTRFS_QUOTA=50G

# Kafka Broker 2 (on server 2, using host networking)
KAFKA2_SERVER=SERVER_2
KAFKA2_CONTAINER_NAME=kafka-broker-2
KAFKA2_HOST_IP=123.200.0.117
KAFKA2_PORT=9092
KAFKA2_BROKER_ID=2
KAFKA2_ZOOKEEPER_CONNECT=123.200.0.50:2181,123.200.0.117:2181,123.200.0.51:2181/kafka
KAFKA2_LISTENERS=PLAINTEXT://0.0.0.0:9092
KAFKA2_ADVERTISED_LISTENERS=PLAINTEXT://123.200.0.117:9092
KAFKA2_LOG_DIRS=/data/kafka-logs
KAFKA2_HEAP_OPTS=-Xms1G -Xmx1G
KAFKA2_BTRFS_QUOTA=50G

# Kafka Broker 3 (on server 3, using host networking)
KAFKA3_SERVER=SERVER_3
KAFKA3_CONTAINER_NAME=kafka-broker-3
KAFKA3_HOST_IP=123.200.0.51
KAFKA3_PORT=9092
KAFKA3_BROKER_ID=3
KAFKA3_ZOOKEEPER_CONNECT=123.200.0.50:2181,123.200.0.117:2181,123.200.0.51:2181/kafka
KAFKA3_LISTENERS=PLAINTEXT://0.0.0.0:9092
KAFKA3_ADVERTISED_LISTENERS=PLAINTEXT://123.200.0.51:9092
KAFKA3_LOG_DIRS=/data/kafka-logs
KAFKA3_HEAP_OPTS=-Xms1G -Xmx1G
KAFKA3_BTRFS_QUOTA=50G

# ============================================
# LXC IMAGE CONFIGURATION
# ============================================
ZOOKEEPER_BASE_IMAGE=zookeeper-base
KAFKA_BASE_IMAGE=kafka-base

# Local image paths (for upload if needed)
ZOOKEEPER_IMAGE_TAR=/home/mustafa/telcobright-projects/orchestrix/images/lxc/zookeeper/zookeeper-v.1/generated/artifact/zookeeper-v1-20251018_210529.tar.gz
KAFKA_IMAGE_TAR=/home/mustafa/telcobright-projects/orchestrix/images/lxc/kafka/kafka-v.1/generated/artifact/kafka-v1-20251018_204403.tar.gz

# ============================================
# DEPLOYMENT OPTIONS
# ============================================
AUTO_START=true
VERIFY_CLUSTER=true
CLEANUP_EXISTING=true
ORCHESTRIX_PATH=/home/tbsms/orchestrix

# ============================================
# CONNECTION STRINGS (Generated after deployment)
# ============================================
# ZOOKEEPER_CONNECT=123.200.0.50:2181,123.200.0.117:2181,123.200.0.51:2181/kafka
# KAFKA_BOOTSTRAP=123.200.0.50:9092,123.200.0.117:9092,123.200.0.51:9092
