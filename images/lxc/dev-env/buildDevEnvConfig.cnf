# Build Configuration for Development Environment LXC Container
# This file contains all configuration parameters for building the dev-env container

# ============================================
# Container Basic Configuration
# ============================================
CONTAINER_NAME="dev-env"
DEBIAN_VERSION="12"
ARCH="amd64"

# ============================================
# Host Configuration Path
# ============================================
# This is where the tunnel configuration will be stored on the HOST
# The container will read from this location via bind mount
HOST_CONFIG_BASE="/opt/orchestrix/config"

# ============================================
# Backup Configuration
# ============================================
BACKUP_DIR="/home/mustafa/telcobright-projects/orchestrix/images/lxc/dev-env"
BACKUP_RETENTION_DAYS="7"

# ============================================
# SSH Configuration
# ============================================
SSH_USER="devuser"
SSH_PORT="22"

# ============================================
# Default Tunnel Configuration
# ============================================
# These are the default tunnels that will be configured
# Format: Service|RemoteServer|RemotePort|LocalPort|SSHUser|SSHPassword|SSHPort|Description

# Production servers - Update these with actual credentials
TUNNEL_KAFKA="Kafka|103.95.96.76|9092|9092|telcobright|Takay1#$ane%%|22|Message broker"
TUNNEL_ZOOKEEPER="Zookeeper|103.95.96.76|2181|2181|root|yourpassword|22|Kafka coordinator"
TUNNEL_MYSQL="MySQL|103.95.96.77|3306|3306|root|yourpassword|22|Database"
TUNNEL_REDIS="Redis|103.95.96.76|6379|6379|root|yourpassword|22|Cache"

# Additional tunnel examples (commented out)
# TUNNEL_POSTGRES="PostgreSQL|10.0.1.50|5432|5432|dbuser|dbpass|22|PostgreSQL Database"
# TUNNEL_ELASTICSEARCH="Elasticsearch|10.0.1.60|9200|9200|elastic|elasticpass|22|Search engine"
# TUNNEL_MONGODB="MongoDB|10.0.1.70|27017|27017|mongouser|mongopass|22|NoSQL Database"

# ============================================
# Network Configuration
# ============================================
# Network bridge
NETWORK_MODE="bridge"
NETWORK_BRIDGE="lxdbr0"

# Container resource limits
MEMORY_LIMIT="512MB"
CPU_LIMIT="1"

# ============================================
# Service Configuration
# ============================================
# Auto-start tunnels on container boot
AUTOSTART_TUNNELS="true"

# Health check interval (in seconds)
HEALTH_CHECK_INTERVAL="60"

# Retry settings for failed tunnels
TUNNEL_RETRY_COUNT="3"
TUNNEL_RETRY_DELAY="10"

# ============================================
# Logging Configuration
# ============================================
LOG_DIR="/var/log/ssh-tunnels"
LOG_LEVEL="INFO"
LOG_ROTATION="daily"
LOG_RETENTION_DAYS="7"

# ============================================
# Security Configuration (for future use)
# ============================================
# Enable SSH key-based authentication only
FORCE_KEY_AUTH="false"

# SSH key location (if using key-based auth)
SSH_KEY_PATH="/root/.ssh/id_rsa"

# Restrict tunnel access to specific IPs
ALLOWED_IPS=""  # Comma-separated list of IPs

# ============================================
# Monitoring Configuration
# ============================================
# Enable tunnel monitoring endpoint
ENABLE_MONITORING="true"
MONITORING_PORT="8080"

# ============================================
# Environment-specific settings
# ============================================
ENVIRONMENT="development"

# Development settings
if [ "$ENVIRONMENT" = "development" ]; then
    AUTOSTART_TUNNELS="false"
    LOG_LEVEL="DEBUG"
fi

# Production settings
if [ "$ENVIRONMENT" = "production" ]; then
    AUTOSTART_TUNNELS="true"
    LOG_LEVEL="ERROR"
    FORCE_KEY_AUTH="true"
fi