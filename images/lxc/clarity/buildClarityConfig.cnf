# Build Configuration for Clarity LXC Container
# This file contains all configuration parameters for building the Clarity container

# ============================================
# Container Basic Configuration
# ============================================
CONTAINER_NAME="clarity"
DEBIAN_VERSION="12"
ARCH="amd64"

# ============================================
# Network Configuration
# ============================================
# Ports configuration
PROMETHEUS_PORT=9090
GRAFANA_PORT=3300

# Network bridge
NETWORK_MODE="bridge"
NETWORK_BRIDGE="lxdbr0"

# ============================================
# Storage Configuration
# ============================================
# Host paths for bind mounts
HOST_CONFIG_BASE="/home/telcobright/app/orchestrix/config"
HOST_DATA_BASE="/home/telcobright/app/orchestrix/data"

# Container memory and CPU limits
MEMORY_LIMIT="2GB"
CPU_LIMIT="2"

# ============================================
# Service Configuration
# ============================================
# Prometheus settings
PROMETHEUS_RETENTION_TIME="30d"
PROMETHEUS_RETENTION_SIZE="10GB"
PROMETHEUS_SCRAPE_INTERVAL="15s"
PROMETHEUS_EVALUATION_INTERVAL="15s"

# Grafana settings
GRAFANA_ADMIN_USER="admin"
GRAFANA_ADMIN_PASSWORD="admin"
GRAFANA_ALLOW_SIGNUP="false"
GRAFANA_ANONYMOUS_ENABLED="false"

# ============================================
# Backup Configuration
# ============================================
# Local backup directory
BACKUP_DIR="/home/mustafa/telcobright-projects/orchestrix/images/lxc/clarity"
BACKUP_RETENTION_DAYS="7"

# ============================================
# RClone Upload Configuration
# ============================================
# RClone remote configuration
RCLONE_REMOTE="pialmmhtb"
RCLONE_REMOTE_PATH="orchestrix/lxc-images/clarity"
RCLONE_UPLOAD_ENABLED="true"

# Upload options
RCLONE_CHUNK_SIZE="128M"
RCLONE_TRANSFERS="4"
RCLONE_CHECKERS="8"
RCLONE_PROGRESS="true"

# ============================================
# Jenkins Configuration
# ============================================
# Build metadata
BUILD_VERSION="1.0.0"
BUILD_TIMESTAMP="$(date +%Y%m%d-%H%M%S)"
BUILD_TAG="${CONTAINER_NAME}-${BUILD_VERSION}-${BUILD_TIMESTAMP}"

# Notifications
NOTIFY_ON_SUCCESS="true"
NOTIFY_ON_FAILURE="true"
NOTIFY_EMAIL="devops@orchestrix.com"

# ============================================
# Advanced Configuration
# ============================================
# Autostart configuration
AUTOSTART_ENABLED="true"
AUTOSTART_DELAY="10"
AUTOSTART_ORDER="100"

# Restart policy
RESTART_POLICY="always"
RESTART_SEC="10"

# Debug mode
DEBUG_MODE="false"
VERBOSE_OUTPUT="false"

# ============================================
# Repository Configuration
# ============================================
# Where to download Prometheus/Grafana from
PROMETHEUS_DOWNLOAD_URL="https://github.com/prometheus/prometheus/releases/latest"
GRAFANA_REPO_URL="https://packages.grafana.com/oss/deb"

# ============================================
# Monitoring Targets (comma-separated)
# ============================================
# Default Prometheus targets to monitor
PROMETHEUS_TARGETS="localhost:9090"
# Add more targets as needed: "10.0.1.10:9100,10.0.1.11:9100"

# ============================================
# Environment-specific Overrides
# ============================================
# Override settings based on environment
# Values: development, staging, production
ENVIRONMENT="development"

# Development overrides
if [ "$ENVIRONMENT" = "development" ]; then
    PROMETHEUS_RETENTION_TIME="1d"
    PROMETHEUS_RETENTION_SIZE="1GB"
    DEBUG_MODE="true"
fi

# Production overrides
if [ "$ENVIRONMENT" = "production" ]; then
    GRAFANA_ADMIN_PASSWORD="changeme_production"
    AUTOSTART_ENABLED="true"
    RCLONE_UPLOAD_ENABLED="true"
fi