# Storage Requirements for Grafana-Loki Container

# ============================================
# Storage Sizing Requirements
# ============================================

# Minimum storage quota
min.quota.size=10G

# Recommended storage quota for production
recommended.quota.size=30G

# Maximum expected storage (for large deployments)
max.quota.size=100G

# Storage type preference (ssd recommended for performance)
preferred.storage.type=ssd

# ============================================
# Data Directories
# ============================================

# Directories that need persistence
data.directories=/var/lib/grafana,/var/lib/loki,/var/log/grafana,/var/log/loki

# Grafana data directory (dashboards, plugins, database)
grafana.data.dir=/var/lib/grafana
grafana.data.estimated.size=2G

# Loki data directory (logs, chunks, index)
loki.data.dir=/var/lib/loki
loki.data.estimated.size=20G

# Log directories
log.directories=/var/log/grafana,/var/log/loki,/var/log/promtail
log.estimated.size=5G

# ============================================
# Growth Estimation
# ============================================

# Estimated growth rate (GB per month)
growth.rate.monthly=5

# Factors affecting growth:
# - Number of log sources
# - Log verbosity level
# - Retention period
# - Number of dashboards
# - Number of users

# Growth formula (GB/month):
# growth = (log_sources * avg_log_size_per_source * 30 * retention_factor)
# Example: 10 sources * 100MB/day * 30 days * 0.5 = 15GB/month

# ============================================
# Snapshot Requirements
# ============================================

# Snapshots required for backup and recovery
snapshot.required=true

# Recommended snapshot frequency for production
snapshot.frequency=daily

# Number of snapshots to retain
snapshot.retention.days=7

# Snapshot storage overhead (percentage of used space)
snapshot.overhead.percentage=20

# ============================================
# Backup Requirements
# ============================================

# Backups required for disaster recovery
backup.required=true

# Backup frequency
backup.frequency=weekly

# Backup retention
backup.retention.weeks=4

# Critical data to backup
backup.critical.paths=/var/lib/grafana/grafana.db,/etc/grafana,/etc/loki

# ============================================
# Performance Considerations
# ============================================

# IOPS requirements
iops.read.min=500
iops.write.min=200

# Throughput requirements (MB/s)
throughput.read.min=50
throughput.write.min=25

# Recommended storage features
features.compression=true
features.deduplication=false
features.encryption=optional

# ============================================
# Monitoring Thresholds
# ============================================

# Alert when storage usage exceeds (percentage)
alert.threshold.warning=70
alert.threshold.critical=85

# Alert when growth rate exceeds (GB/day)
alert.growth.rate.warning=2
alert.growth.rate.critical=5

# ============================================
# Retention Policies
# ============================================

# Default log retention in Loki (days)
loki.retention.default=30

# Retention by log level
loki.retention.error=90
loki.retention.warning=60
loki.retention.info=30
loki.retention.debug=7

# Grafana dashboard history retention (days)
grafana.history.retention=365

# ============================================
# Storage Tiers (for different environments)
# ============================================

# Development environment
dev.quota.size=10G
dev.storage.type=any
dev.snapshot.enabled=false

# Staging environment
staging.quota.size=20G
staging.storage.type=ssd
staging.snapshot.enabled=true

# Production environment
prod.quota.size=50G
prod.storage.type=ssd
prod.snapshot.enabled=true
prod.snapshot.frequency=hourly

# ============================================
# Capacity Planning
# ============================================

# Formula for capacity planning:
# Required Storage = (Daily Log Volume * Retention Days) * 1.3 (overhead)
#
# Example calculations:
# - 1GB/day * 30 days = 30GB * 1.3 = 39GB
# - 5GB/day * 30 days = 150GB * 1.3 = 195GB
#
# Add 20% for snapshots if enabled