# Consul Container Runtime Configuration
# This file configures a single Consul node at runtime
#
# USAGE:
# ./launchConsul.sh /path/to/this/config.conf consul-instance-name
#
# For a 3-node cluster, create 3 config files (one per node)
# See: node1.conf, node2.conf, node3.conf

# ============================================
# CONTAINER SETTINGS
# ============================================
CONTAINER_NAME="consul-node-1"              # Unique name for this instance
IMAGE_PATH="/path/to/consul-v1-TIMESTAMP.tar.gz"  # Path to container image

# ============================================
# CONSUL NODE CONFIGURATION
# ============================================
NODE_ID="consul-node-1"                     # Unique node identifier
DATACENTER="dc1"                            # Datacenter name
SERVER_MODE="true"                          # true for server, false for client
BOOTSTRAP_EXPECT="3"                        # Number of servers to wait for bootstrap

# ============================================
# NETWORK CONFIGURATION
# ============================================
BIND_ADDR="10.10.199.100"                   # This node's IP address (set after container starts)
                                            # Use container's actual IP, or set static IP

# Other nodes to join (JSON array format)
# For first node to start, use empty array: []
# For subsequent nodes, list already-running nodes
RETRY_JOIN='["10.10.199.101","10.10.199.102"]'

# ============================================
# PORT CONFIGURATION
# ============================================
# For SAME SERVER testing (avoid conflicts):
#   Node 1: Use standard ports (8500, 8600, 8300, 8301, 8302)
#   Node 2: Use +10 offset   (8510, 8610, 8310, 8311, 8312)
#   Node 3: Use +20 offset   (8520, 8620, 8320, 8321, 8322)
#
# For DIFFERENT SERVERS (production):
#   All nodes: Use standard ports (8500, 8600, 8300, 8301, 8302)

HTTP_PORT="8500"                            # HTTP API port
DNS_PORT="8600"                             # DNS interface port
SERVER_RPC_PORT="8300"                      # Server RPC port
SERF_LAN_PORT="8301"                        # Serf LAN port
SERF_WAN_PORT="8302"                        # Serf WAN port

# ============================================
# RESOURCE LIMITS (Optional)
# ============================================
MEMORY_LIMIT="512MB"                        # Memory limit
CPU_LIMIT="1"                               # CPU cores

# ============================================
# LOGGING
# ============================================
LOG_LEVEL="INFO"                            # DEBUG, INFO, WARN, ERROR

# ============================================
# NOTES
# ============================================
# Clustering Workflow:
# 1. Start first node with RETRY_JOIN='[]'
# 2. Get its IP address
# 3. Start second node with RETRY_JOIN='["first-node-ip"]'
# 4. Start third node with RETRY_JOIN='["first-node-ip","second-node-ip"]'
# 5. All nodes will auto-discover and form cluster
