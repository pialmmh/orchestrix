# Staging Profile Configuration
spring.profiles.active=staging

# Server Configuration
server.port=8080
server.servlet.context-path=/api

# Application Name
spring.application.name=orchestrix-staging

# Database Configuration (MySQL - Staging)
spring.datasource.url=jdbc:mysql://staging-db.orchestrix.com:3306/orchestrix_staging?useSSL=true&serverTimezone=UTC&allowPublicKeyRetrieval=true
spring.datasource.driverClassName=com.mysql.cj.jdbc.Driver
spring.datasource.username=${DB_USERNAME:orchestrix_user}
spring.datasource.password=${DB_PASSWORD:staging_password}

# Connection Pool Configuration
spring.datasource.hikari.maximum-pool-size=20
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.idle-timeout=600000
spring.datasource.hikari.max-lifetime=1800000

# JPA/Hibernate Configuration - Staging
spring.jpa.hibernate.ddl-auto=validate
spring.jpa.show-sql=false
spring.jpa.database-platform=org.hibernate.dialect.MySQL8Dialect
spring.h2.console.enabled=false
spring.jpa.properties.hibernate.format_sql=false
spring.jpa.properties.hibernate.use_sql_comments=false

# Logging - Staging
logging.level.com.telcobright.orchestrix=INFO
logging.level.org.springframework.web=WARN
logging.level.org.hibernate.SQL=WARN
logging.level.root=WARN
logging.file.name=logs/orchestrix-staging.log
logging.file.max-size=100MB
logging.file.max-history=30

# JWT Configuration - Staging
jwt.secret=${JWT_SECRET:staging-orchestrix-secret-key-for-jwt-token-generation-must-be-at-least-256-bits}
jwt.expiration=43200000
jwt.refresh.expiration=259200000

# CORS Configuration - Staging
cors.allowed-origins=https://staging.orchestrix.com,https://staging-admin.orchestrix.com
cors.allowed-methods=GET,POST,PUT,DELETE,OPTIONS
cors.allowed-headers=Authorization,Content-Type,Accept,Origin,User-Agent,DNT,Cache-Control,X-Mx-ReqToken,Keep-Alive,X-Requested-With,If-Modified-Since,X-CSRF-Token
cors.allow-credentials=true

# File Upload Configuration
spring.servlet.multipart.max-file-size=25MB
spring.servlet.multipart.max-request-size=25MB

# Session Configuration
server.servlet.session.timeout=30m

# Actuator - Staging (Limited endpoints)
management.endpoints.web.exposure.include=health,info,metrics,prometheus
management.endpoint.health.show-details=when-authorized
management.endpoints.web.base-path=/actuator
management.security.enabled=true

# SSL Configuration
server.ssl.enabled=false

# Cache Configuration
spring.cache.type=redis
spring.redis.host=${REDIS_HOST:staging-redis.orchestrix.com}
spring.redis.port=${REDIS_PORT:6379}
spring.redis.password=${REDIS_PASSWORD:}

# Performance settings
server.compression.enabled=true
server.compression.mime-types=text/html,text/xml,text/plain,text/css,text/javascript,application/javascript,application/json
server.compression.min-response-size=1024