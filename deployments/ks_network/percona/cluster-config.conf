# KS Network Percona MySQL 5.7 Master-Slave Cluster Configuration
# GTID-based replication for high availability

# Cluster Name
CLUSTER_NAME="ks_network_mysql"

# SSH Configuration
SSH_PORT=22

# ============================================================
# MySQL Configuration
# ============================================================
MYSQL_VERSION="5.7"
MYSQL_IMAGE="percona:5.7"

# Credentials (change in production!)
MYSQL_ROOT_PASSWORD="KsMySQLRoot!2025"
MYSQL_REPL_USER="replicator"
MYSQL_REPL_PASSWORD="KsReplPass!2025"

# Data Directory
MYSQL_DATA_DIR="/var/lib/mysql"

# ============================================================
# InnoDB Settings (4GB buffer pool as requested)
# ============================================================
INNODB_BUFFER_POOL_SIZE="4G"
INNODB_LOG_FILE_SIZE="512M"
INNODB_FLUSH_LOG_AT_TRX_COMMIT=1

# ============================================================
# GTID Replication Settings
# ============================================================
GTID_MODE="ON"
ENFORCE_GTID_CONSISTENCY="ON"

# ============================================================
# Master Node - Node 1 (172.27.27.132)
# ============================================================
MASTER_MGMT_IP="172.27.27.132"
MASTER_SSH_USER="csas"
# SECURITY: For production, use SSH keys instead of password authentication
# Configure SSH key-based authentication and leave SSH_PASS empty
MASTER_SSH_PASS="KsCSAS!@9"
MASTER_MYSQL_IP="10.10.199.10"
MASTER_SERVER_ID=1
MASTER_BRIDGE_NAME="lxdbr0"

# ============================================================
# Slave Nodes
# ============================================================
SLAVE_COUNT=1

# Slave 1 - Node 2 (172.27.27.136)
SLAVE1_MGMT_IP="172.27.27.136"
SLAVE1_SSH_USER="csas"
# SECURITY: For production, use SSH keys instead of password authentication
SLAVE1_SSH_PASS="KsCSAS!@9"
SLAVE1_MYSQL_IP="10.10.198.10"
SLAVE1_SERVER_ID=2
SLAVE1_BRIDGE_NAME="lxdbr0"

# ============================================================
# Additional Notes
# ============================================================
# - Master binds to: 10.10.199.10:3306
# - Slave binds to: 10.10.198.10:3306
# - Both accessible via WireGuard overlay network (10.9.10.0/24)
# - BGP routes container subnets (10.10.199.0/24, 10.10.198.0/24)
# - GTID replication for automatic failover positioning
