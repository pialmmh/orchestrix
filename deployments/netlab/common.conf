# Common Configuration for Netlab Tenant
# Shared parameters used across all automation deployments (FRR, WireGuard, LXD, etc.)

# ============================================================
# Tenant Information
# ============================================================
TENANT_NAME="netlab"
TENANT_ID="netlab"
ENVIRONMENT="test"

# ============================================================
# SSH Connection Parameters
# ============================================================
# Default SSH user for all nodes
SSH_USER="telcobright"

# SSH authentication (use one of these methods):
# Method 1: Password file (stored in .secrets/ - gitignored)
SSH_PASSWORD_FILE="deployments/netlab/.secrets/ssh-password.txt"

# Method 2: SSH key file (recommended for production)
# SSH_KEY_FILE="deployments/netlab/.secrets/ssh-key"

# IMPORTANT: Never commit passwords directly in this file!
# Setup secrets: cd deployments/netlab/.secrets && ./setup-example.sh
# Or manually: echo "your_password" > .secrets/ssh-password.txt && chmod 600 .secrets/ssh-password.txt

# Default SSH port
SSH_PORT="22"

# SSH timeout (seconds)
SSH_TIMEOUT="30"

# SSH options for automation
SSH_OPTIONS="-o StrictHostKeyChecking=no -o ConnectTimeout=10"

# ============================================================
# Node Definitions
# ============================================================
# Management IPs for each node
NODE1_IP="10.20.0.30"
NODE2_IP="10.20.0.31"
NODE3_IP="10.20.0.32"

# Node hostnames
NODE1_HOSTNAME="netlab01"
NODE2_HOSTNAME="netlab02"
NODE3_HOSTNAME="netlab03"

# ============================================================
# Network Configuration
# ============================================================
# Overlay network range (WireGuard)
OVERLAY_NETWORK="10.9.9.0/24"
OVERLAY_PORT="51820"

# Container network supernet
CONTAINER_SUPERNET="10.10.0.0/16"

# Management network
MANAGEMENT_NETWORK="10.20.0.0/24"
MANAGEMENT_GATEWAY="10.20.0.1"

# ============================================================
# BGP Configuration
# ============================================================
# BGP AS number range
BGP_AS_BASE="65197"  # Base AS, incremented per node

# BGP timers (keepalive holdtime)
BGP_TIMERS="10 30"

# ============================================================
# LXD/LXC Configuration
# ============================================================
# Default LXD bridge name
LXD_BRIDGE="lxdbr0"

# Default resource limits
DEFAULT_MEMORY_LIMIT="512MB"
DEFAULT_CPU_LIMIT="1.0"

# ============================================================
# Deployment Options
# ============================================================
# Enable verbose logging
VERBOSE="true"

# Dry run mode (don't apply changes)
DRY_RUN="false"

# Auto-confirm prompts
AUTO_CONFIRM="false"

# Backup before deployment
CREATE_BACKUP="true"

# ============================================================
# Image Repository
# ============================================================
# Base image versions
FRR_BASE_IMAGE="frr-router-base-v.1.0.0"
LXD_BASE_IMAGE="debian/12"

# Image registry (if using remote registry)
# IMAGE_REGISTRY="registry.example.com"

# ============================================================
# Paths
# ============================================================
# Path to deployment configs (relative to this file)
CONFIG_DIR="."

# Path to generated configs (runtime)
GENERATED_DIR="/tmp/orchestrix-deployments/netlab"

# Path to logs
LOG_DIR="/var/log/orchestrix/netlab"

# ============================================================
# Notifications
# ============================================================
# Email notifications
# NOTIFY_EMAIL="admin@example.com"

# Slack webhook
# SLACK_WEBHOOK="https://hooks.slack.com/services/..."

# ============================================================
# Notes
# ============================================================
# This configuration file is sourced by deployment automation scripts
# Override any parameter by setting environment variables before running
# Example: SSH_USER=root ./deploy.sh
