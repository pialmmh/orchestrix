# Generated Configuration Files

These configurations were auto-generated by `FullClusterDeploymentExample` demonstrating the fixed automation code.

## Files

### WireGuard Overlay Configs
- `node1-wg-overlay.conf` - Node 1 mesh peer (10.9.9.1)
- `node2-wg-overlay.conf` - Node 2 mesh peer (10.9.9.2)
- `node3-wg-overlay.conf` - Node 3 VPN gateway + mesh peer (10.9.9.3)

### FRR BGP Configs
- `node1-frr.conf` - Node 1 BGP (AS 65199)
- `node2-frr.conf` - Node 2 BGP (AS 65198)
- `node3-frr.conf` - Node 3 BGP (AS 65197)

### VPN Client Configs
- `client1.conf` - VPN client (10.9.9.254)
- `client2.conf` - VPN client (10.9.9.253)
- `client3.conf` - VPN client (10.9.9.252)

## Deployment Instructions

### On Each Node:

1. **Install WireGuard:**
```bash
sudo apt-get update
sudo apt-get install -y wireguard wireguard-tools
sudo sysctl -w net.ipv4.ip_forward=1
```

2. **Deploy WireGuard config:**
```bash
sudo cp nodeX-wg-overlay.conf /etc/wireguard/wg-overlay.conf
sudo chmod 600 /etc/wireguard/wg-overlay.conf
sudo wg-quick up wg-overlay
sudo systemctl enable wg-quick@wg-overlay
```

3. **Install FRR:**
```bash
curl -fsSL https://deb.frrouting.org/frr/keys.asc | sudo apt-key add -
echo "deb https://deb.frrouting.org/frr $(lsb_release -s -c) frr-stable" | sudo tee /etc/apt/sources.list.d/frr.list
sudo apt-get update
sudo apt-get install -y frr frr-pythontools
```

4. **Enable BGP daemon:**
```bash
sudo sed -i 's/^bgpd=no/bgpd=yes/' /etc/frr/daemons
```

5. **Deploy FRR config:**
```bash
sudo cp nodeX-frr.conf /etc/frr/frr.conf
sudo chown frr:frr /etc/frr/frr.conf
sudo chmod 640 /etc/frr/frr.conf
sudo systemctl restart frr
```

6. **Verify:**
```bash
# Check WireGuard
sudo wg show wg-overlay

# Check BGP
sudo vtysh -c 'show ip bgp summary'
sudo vtysh -c 'show ip bgp'
```

### On Developer PC:

```bash
# Copy client config
sudo cp client1.conf /etc/wireguard/client1.conf
sudo chmod 600 /etc/wireguard/client1.conf

# Connect
sudo wg-quick up client1

# Test
ping 10.9.9.3          # VPN gateway
ping 10.10.199.20      # Node 1 container
ping 10.10.198.20      # Node 2 container
ping 10.10.197.20      # Node 3 container
```

## Network Architecture

```
Developer PC (10.9.9.254)
     |
     | VPN Connection
     |
Node 3 (VPN Gateway)
- 10.9.9.3
- AS 65197
- 10.10.197.0/24
     |
     | WireGuard Mesh
    / \
   /   \
Node 1  Node 2
10.9.9.1  10.9.9.2
AS 65199  AS 65198
10.10.199.0/24  10.10.198.0/24
```

## Key Features

✅ Follows TelcoBright Container Networking Guideline
✅ Uses /32 for mesh peer overlay IPs (prevents routing conflicts)
✅ Includes ebgp-multihop 2 for BGP over WireGuard
✅ Single VPN gateway architecture (Node 3 only)
✅ Full mesh BGP peering between all nodes

## Generated By

`com.telcobright.orchestrix.automation.example.FullClusterDeploymentExample`

Based on successful BDCOM deployment (2025-11-10)
